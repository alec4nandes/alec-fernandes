<!DOCTYPE html> <html lang="en"> <head> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-7QM5KTX0XK"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-7QM5KTX0XK');
</script> <meta charset="UTF-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <title>Timers</title> <meta name="type" property="og:type" content="website"/> <meta name="title" property="og:title" content="Timers"/> <meta name="url" property="og:url" content="https://fern.haus/blog/timers.html"/> <meta name="description" property="og:description" content="Learn how to repeatedly play the same sound file on mobile using setInterval in JS." /> <meta name="image" property="og:image" content="/blog/feature-images/timers.jpg"/> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:site" content="@alec4nandes"/> <meta name="twitter:title" content="Timers"/> <meta name="twitter:description" content="Learn how to repeatedly play the same sound file on mobile using setInterval in JS."/> <meta name="twitter:image" content="/blog/feature-images/timers.jpg"/> <link rel="icon" type="image/x-icon" href="/assets/logo/favicon.ico"/> <link rel="stylesheet" href="/css/style.css"/> <link rel="stylesheet" href="/css/header-menu.css"/> <link rel="stylesheet" href="/css/article.css"/> </head> <body> <header class="small-header-container"> <div class="small-header"> <h1> <a href="/">Alec Fernandes</a> </h1> </div> </header> <div class="subscribe-container"> <div class="subscribe"> <button class="open-nav" onclick="toggleNavMenu(true)"> <img src="/assets/icons8-menu-64.png" alt=""/> </button> <nav class="closed"> <button class="close-nav" onclick="toggleNavMenu(false)"> <img src="/assets/icons8-close-30.png" alt=""/> </button> <ul> <li> <a href="/">Home</a> </li> <li> <a href="/blog">Blog</a> </li> <li> <a href="/contact">Contact</a> </li> </ul> <h2 class="nav-heading"> Projects <a href="https://github.com/alec4nandes" target="_blank" rel="noopener" > <img src="/assets/icons8-github-30.png" alt=""/> </a> </h2> <ul> <li> <a href="/blog/prova-lab.html"> prova lab </a> </li> <li> <a href="/blog/mushrooms.html"> mushrooms </a> </li> <li> <a href="/blog/moon-sun-tides-api.html"> moon sun tides api </a> </li> <li> <a href="/blog/kings-corner.html"> kings corner </a> </li> <li> <a href="/blog/dharma-gem.html"> dharma gem </a> </li> <li> <a href="/blog/iching.html"> iching </a> </li> <li> <a href="/blog/timers.html"> timers </a> </li> <li> <a href="/blog/dharma-deck.html"> dharma deck </a> </li> <li> <a href="/blog/buddhist-ebook.html"> buddhist ebook </a> </li> </ul> <h2 class="nav-heading">Graphic Design</h2> <ul> <li> <a href="/gallery">Gallery</a> </li> </ul> <h2 class="nav-heading">Tags</h2> <ul> <li> <a href="/tags/3d.html">3D</a> </li> <li> <a href="/tags/animations.html">animations</a> </li> <li> <a href="/tags/api.html">API</a> </li> <li> <a href="/tags/ariana-huffington.html">Ariana Huffington</a> </li> <li> <a href="/tags/art.html">art</a> </li> <li> <a href="/tags/buddhism.html">Buddhism</a> </li> <li> <a href="/tags/cards.html">cards</a> </li> <li> <a href="/tags/china.html">China</a> </li> <li> <a href="/tags/coupling.html">coupling</a> </li> <li> <a href="/tags/css.html">CSS</a> </li> <li> <a href="/tags/dates.html">dates</a> </li> <li> <a href="/tags/design.html">design</a> </li> <li> <a href="/tags/diana-smith.html">Diana Smith</a> </li> <li> <a href="/tags/documentation.html">documentation</a> </li> <li> <a href="/tags/dom.html">DOM</a> </li> <li> <a href="/tags/dry.html">DRY</a> </li> <li> <a href="/tags/ebooks.html">eBooks</a> </li> <li> <a href="/tags/epubcheck.html">epubcheck</a> </li> <li> <a href="/tags/event-listeners.html">event listeners</a> </li> <li> <a href="/tags/free.html">free</a> </li> <li> <a href="/tags/free-downloads.html">free downloads</a> </li> <li> <a href="/tags/games.html">games</a> </li> <li> <a href="/tags/geolocation.html">geolocation</a> </li> <li> <a href="/tags/google-firebase.html">Google Firebase</a> </li> <li> <a href="/tags/google-maps.html">Google Maps</a> </li> <li> <a href="/tags/graphic-design.html">graphic design</a> </li> <li> <a href="/tags/hooks.html">hooks</a> </li> <li> <a href="/tags/html.html">HTML</a> </li> <li> <a href="/tags/innerheight.html">innerHeight</a> </li> <li> <a href="/tags/innovation.html">innovation</a> </li> <li> <a href="/tags/javascript.html">JavaScript</a> </li> <li> <a href="/tags/kabbalah.html">Kabbalah</a> </li> <li> <a href="/tags/landing-pages.html">landing pages</a> </li> <li> <a href="/tags/layouts.html">layouts</a> </li> <li> <a href="/tags/libraries.html">libraries</a> </li> <li> <a href="/tags/mushroom-observer.html">Mushroom Observer</a> </li> <li> <a href="/tags/mushrooms.html">mushrooms</a> </li> <li> <a href="/tags/nature.html">nature</a> </li> <li> <a href="/tags/offsetheight.html">offsetHeight</a> </li> <li> <a href="/tags/parallax-scrolling.html">parallax scrolling</a> </li> <li> <a href="/tags/pomodoro.html">Pomodoro</a> </li> <li> <a href="/tags/productivity.html">productivity</a> </li> <li> <a href="/tags/projects.html">projects</a> </li> <li> <a href="/tags/prova-lab.html">Prova Lab</a> </li> <li> <a href="/tags/pseudocode.html">pseudocode</a> </li> <li> <a href="/tags/react.html">React</a> </li> <li> <a href="/tags/san-francisco.html">San Francisco</a> </li> <li> <a href="/tags/sass.html">Sass</a> </li> <li> <a href="/tags/scrollheight.html">scrollHeight</a> </li> <li> <a href="/tags/taoism.html">Taoism</a> </li> <li> <a href="/tags/tarot.html">tarot</a> </li> <li> <a href="/tags/template-literals.html">template literals</a> </li> <li> <a href="/tags/validation.html">validation</a> </li> <li> <a href="/tags/vpn.html">VPN</a> </li> <li> <a href="/tags/workouts.html">workouts</a> </li> <li> <a href="/tags/yin-and-yang.html">yin and yang</a> </li> </ul> </nav> <div class="social-icons"> <a class="sticky-contact-link" href="/contact"> contact me&nbsp; </a> <a href="https://twitter.com/alec4nandes" target="_blank" rel="noopener"> <img src="/assets/icons8-twitter-32.png" alt="Twitter icon of little bird"/> </a> <a href="https://instagram.com/alec4nandes" target="_blank" rel="noopener"> <img src="/assets/icons8-instagram-32.png" alt="Instagram icon of polaroid camera"/> </a> </div> </div> </div> <div class="pagination"> <span> << previous: <a href="/blog/iching.html"> I-Ching </a> </span> <span> next: <a href="/blog/dharma-deck.html"> Dharma Deck </a> >> </span> </div> <main> <article> <h2 class="title">Timers</h2> <h3 class="subtitle">Learn how to repeatedly play the same sound file on mobile using setInterval in JS.</h3> <p class="date-posted">2023-05-05T13:53-07:00</p> <figure> <img src="/blog/feature-images/timers.jpg"/> <figcaption>Photo by <a href="https://unsplash.com/@agebarros?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText" target="_blank" rel="noopener">AgÃª Barros</a> on <a href="https://unsplash.com/photos/rBPOfVqROzY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText" target="_blank" rel="noopener">Unsplash</a></figcaption> </figure> <div><p><a href="/timers" target="_blank" rel="noopener"><em>View this project.</em></a></p> <p> Okay fine. I admit it. I'm not perfect. And before you inevitably try to convince me otherwise, I'll reveal my biggest flaw in the workplace: I'm not good at taking breaks. </p> <p> It's hard to stop myself when I'm caught in a creative flow. I was also raised to be an overachiever, so for a long time I saw taking more breaks as being less productive. Only after pushing myself to <a href="https://www.today.com/health/arianna-huffington-collapse-exhaustion-was-wake-call-2D79644042" target="_blank" rel="noopener">pre-2007 Arianna Huffington stress levels</a> did I realize the importance of taking regular breaks. </p> <p> My favorite method for achieving this is the <em>Pomodoro Timer</em>. It alerts you to take a short break after a fixed interval of time. I find I stay the most creative by taking five minute breaks after every 25 minutes or so of work. At first 25 minutes didn't even seem like enough time to get settled, but I was amazed to discover how much I could get done in that span when I quickly and regularly refreshed myself. It improved my workflow so much that I decided to design <a href="/timers/pomodoro" target="_blank" rel="noopener">my own Pomodoro Timer</a>. </p> <p> The implementation wasn't anything too complicated &mdash; just alternating <a href="https://developer.mozilla.org/en-US/docs/Web/API/setInterval" target="_blank" rel="noopener">setIntervals</a> marked by two distinct sounds. I also used this approach to create <a href="/timers/workout" target="_blank" rel="noopener">a more flexible workout timer</a> that announces what number repetition the user is starting. All of this worked great on desktop, but mobile was a different story. </p> <p> It turns out on mobile you can automatically play a JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLAudioElement/Audio" target="_blank" rel="noopener">Audio object</a> (such as the timer's beep), but without further user interaction (such as clicking a button) the sound only plays once. This was a big problem for a web app that played automated beeps after several intervals of work and break time. </p> <p> After identifying the issue above with the help of <a href="https://stackoverflow.com" target="_blank" rel="noopener">Stack Overflow</a>, it occurred to me that I could automatically play the same sound multiple times on mobile devices if I created arrays full of separate Audio objects that play the same sound. Iterating through these identical playbacks would trick the browser into thinking it's playing a brand new sound automatically for the first time. </p> <pre><code><xmp>/*
    Mobile browsers will not play sounds repeatedly with setInterval.
    Create arrays of Audio objects to play separately.
*/

const breakBeeps = [],
    workBeeps = [];

for (let i = 0; i < 24; i++) {
    breakBeeps.push(new Audio("./audio/break-start-beep.mp3"));
    workBeeps.push(new Audio("./audio/break-end-beep.mp3"));
}
</xmp></code></pre> <p> I'm happy to say this hack worked, and now I can successfully use <a href="/timers" target="_blank" rel="noopener">both timers</a> when I'm away from my desktop. If you haven't ever tried integrating a productivity timer into your workflow, I highly suggest you do. Let me know how it goes by sending an email to <a href="mailto:al@fern.haus">al@fern.haus</a>. </p> </div> <div class="tags"> tags: <ul class="commas"> <li> <a href="/tags/projects.html">projects</a> </li> <li> <a href="/tags/javascript.html">JavaScript</a> </li> <li> <a href="/tags/productivity.html">productivity</a> </li> <li> <a href="/tags/pomodoro.html">Pomodoro</a> </li> <li> <a href="/tags/workouts.html">workouts</a> </li> <li> <a href="/tags/ariana-huffington.html">Ariana Huffington</a> </li> </ul> </div> <button class="share-button" onclick="copyLink()"> share <img src="/assets/icons8-share-24.png" alt=""/> </button> </article> </main> <a href="/contact" class="sticky-contact"> <img src="/assets/mail-icon.png" alt="" /> </a> <div class="pagination"> <span> << previous: <a href="/blog/iching.html"> I-Ching </a> </span> <span> next: <a href="/blog/dharma-deck.html"> Dharma Deck </a> >> </span> </div> <footer> <div id="footer-container"> <a href="/">home</a> <a href="/blog">blog</a> <a href="/contact">contact</a> </div> </footer> <script src="/src/scripts.js"></script> </body> </html>