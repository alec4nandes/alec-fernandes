<!DOCTYPE html> <html lang="en"> <head> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-7QM5KTX0XK"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-7QM5KTX0XK');
</script> <meta charset="UTF-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <title>Timers &mdash; FERN HAUS</title> <!-- meta_tags --> <meta name="type" property="og:type" content="website"/> <meta name="title" property="og:title" content="Timers &mdash; FERN HAUS"/> <meta name="url" property="og:url" content="https-fern-haus-posts-timers-html"/> <meta name="description" property="og:description" content="Learn how to repeatedly play the same sound file on mobile using setInterval in JS. &mdash; Web Dev &mdash; JavaScript, productivity, Pomodoro, workouts, Ariana Huffington"/> <meta name="image" property="og:image" content="https://fern.haus/assets/feature-images/timers.jpg"/> <!-- twitter meta tags --> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:site" content="@alec4nandes"/> <meta name="twitter:title" content="Timers &mdash; FERN HAUS"/> <meta name="twitter:description" content="Learn how to repeatedly play the same sound file on mobile using setInterval in JS. &mdash; Web Dev &mdash; JavaScript, productivity, Pomodoro, workouts, Ariana Huffington"/> <meta name="twitter:image" content="https://fern.haus/assets/feature-images/timers.jpg"/> <!-- end meta tags --> <link rel="icon" type="image/x-icon" href="/assets/logo/favicon.png"/> <link rel="stylesheet" href="/css/home.css"/> </head> <body> <header> <div id="name-and-logo"> <button id="hamburger-menu-button"> <img src="/assets/hamburger-menu-icon.png"> </button> <a href="/"> <div id="logo-container"> <img id="header-logo" src="/assets/logo/fern-haus-site-logo.png" alt="Fern Haus logo: a house wrapped with two fern branches."> </div> <h1>Fern Haus</h1> </a> </div> <div id="hamburger-menu" class="closed"> <button id="close-menu"> <img src="/assets/hamburger-menu-close-icon.png"> </button> <h2>Menu</h2> <a href="/">Home</a> <a href="/categories">All Categories</a> <a href="/tags">All Tags</a> <a href="/about">About</a> <a href="/about">Contact</a> <section class="social-icons"> <a href="https://twitter.com/fern_haus_" target="_blank"> <img class="x-icon" src="/assets/social/x.png"/> </a> <a href="https://instagram.com/fern_haus_" target="_blank"> <img class="instagram-icon" src="/assets/social/instagram.png"/> </a> <a href="https://www.tiktok.com/@fern_haus_" target="_blank"> <img class="tiktok-icon" src="/assets/social/tiktok.png"/> </a> </section> </div> </header> <main> <section id="main-content"> <div id="posts-container"> <div id="latest-post"> <div class="single-post whole-post"> <div class="post-categories"> <a class="post-category-link" href="/categories/web-dev"> Web Dev </a> </div> <div class="whole-post-image-container"> <img src="/assets/feature-images/timers.jpg" alt=""/> </div> <p class="caption"> <em>Photo by <a href="https://unsplash.com/@agebarros?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText" target="_blank" rel="noopener">AgÃª Barros</a> on <a href="https://unsplash.com/photos/rBPOfVqROzY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText" target="_blank" rel="noopener">Unsplash</a></em> </p> <h2>Timers</h2> <p class="subtitle"> Learn how to repeatedly play the same sound file on mobile using setInterval in JS. </p> <p class="date-posted"> 2023-05-05T13:53-07:00 </p> <p><a href="/timers" target="_blank" rel="noopener"><em>View this project.</em></a></p> <p class="blurb"> Okay fine. I admit it. I'm not perfect. And before you inevitably try to convince me otherwise, I'll reveal my biggest flaw in the workplace: I'm not good at taking breaks. </p> <p> It's hard to stop myself when I'm caught in a creative flow. I was also raised to be an overachiever, so for a long time I saw taking more breaks as being less productive. Only after pushing myself to <a href="https://www.today.com/health/arianna-huffington-collapse-exhaustion-was-wake-call-2D79644042" target="_blank" rel="noopener">pre-2007 Arianna Huffington stress levels</a> did I realize the importance of taking regular breaks. </p> <p> My favorite method for achieving this is the <em>Pomodoro Timer</em>. It alerts you to take a short break after a fixed interval of time. I find I stay the most creative by taking five minute breaks after every 25 minutes or so of work. At first 25 minutes didn't even seem like enough time to get settled, but I was amazed to discover how much I could get done in that span when I quickly and regularly refreshed myself. It improved my workflow so much that I decided to design <a href="/timers/pomodoro" target="_blank" rel="noopener">my own Pomodoro Timer</a>. </p> <p> The implementation wasn't anything too complicated &mdash; just alternating <a href="https://developer.mozilla.org/en-US/docs/Web/API/setInterval" target="_blank" rel="noopener">setIntervals</a> marked by two distinct sounds. I also used this approach to create <a href="/timers/workout" target="_blank" rel="noopener">a more flexible workout timer</a> that announces what number repetition the user is starting. All of this worked great on desktop, but mobile was a different story. </p> <p> It turns out on mobile you can automatically play a JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLAudioElement/Audio" target="_blank" rel="noopener">Audio object</a> (such as the timer's beep), but without further user interaction (such as clicking a button) the sound only plays once. This was a big problem for a web app that played automated beeps after several intervals of work and break time. </p> <p> After identifying the issue above with the help of <a href="https://stackoverflow.com" target="_blank" rel="noopener">Stack Overflow</a>, it occurred to me that I could automatically play the same sound multiple times on mobile devices if I created arrays full of separate Audio objects that play the same sound. Iterating through these identical playbacks would trick the browser into thinking it's playing a brand new sound automatically for the first time. </p> <pre><code><xmp>/*
    Mobile browsers will not play sounds repeatedly with setInterval.
    Create arrays of Audio objects to play separately.
*/

const breakBeeps = [],
    workBeeps = [];

for (let i = 0; i < 24; i++) {
    breakBeeps.push(new Audio("./audio/break-start-beep.mp3"));
    workBeeps.push(new Audio("./audio/break-end-beep.mp3"));
}
</xmp></code></pre> <p> I'm happy to say this hack worked, and now I can successfully use <a href="/timers" target="_blank" rel="noopener">both timers</a> when I'm away from my desktop. If you haven't ever tried integrating a productivity timer into your workflow, I highly suggest you do. Let me know how it goes by sending an email to <a href="mailto:al@fern.haus">al@fern.haus</a>. </p> <br/> </div> </div> </div> </section> <section id="sidebar" class="whole-post-sidebar"> <div id="categories-and-tags"> <a id="home-link" href="/">Go Home</a> <section class="social-icons"> <a href="https://twitter.com/fern_haus_" target="_blank"> <img class="x-icon" src="/assets/social/x.png"/> </a> <a href="https://instagram.com/fern_haus_" target="_blank"> <img class="instagram-icon" src="/assets/social/instagram.png"/> </a> <a href="https://www.tiktok.com/@fern_haus_" target="_blank"> <img class="tiktok-icon" src="/assets/social/tiktok.png"/> </a> </section> <div id="categories"> <div id="categories-sidebar-heading"> <h2>Post Categories</h2> <a class="all-categories-link" href="/categories">all categories</a> </div> <a class="category-link" href="/categories/web-dev"> Web Dev </a> </div> <div id="tags"> <h2>Post Tags</h2> <a href="/tags">all tags</a> <ul class="tags-list"> <li> <a class="tag-link" href="/tags/javascript"> JavaScript </a> </li> <li> <a class="tag-link" href="/tags/productivity"> productivity </a> </li> <li> <a class="tag-link" href="/tags/pomodoro"> Pomodoro </a> </li> <li> <a class="tag-link" href="/tags/workouts"> workouts </a> </li> <li> <a class="tag-link" href="/tags/ariana-huffington"> Ariana Huffington </a> </li> </ul> </div> </div> </section> </main> <footer> <p> <em>&copy; Alec Fernandes 2024</em> </p> <p> <a href="/about">About Fern Haus</a> </p> </footer> <script src="/src/scripts.js"></script> </body> </html>